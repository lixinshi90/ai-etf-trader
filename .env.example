# .env.example - AI ETF Trader 配置模板
# 使用时，请复制为 .env 文件，并填入你的实际配置。

# --- AI & 模型配置 ---
# 必填：你的 OpenAI API 密钥，或兼容服务的密钥
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# 可选：如果你使用兼容 OpenAI 的第三方服务（如 DeepSeek, Groq, Mistral, 智谱等），请填入其 Base URL
# 例如: BASE_URL=https://api.deepseek.com/v1
BASE_URL=

# 可选：指定调用的模型名称
MODEL_NAME=glm-4-air

# 可选：AI 调用失败时的最大重试次数
MAX_RETRIES=3

# 可选：是否启用 Few-shot Prompting
FEW_SHOT_ENABLED=true

# 可选：每日 AI 调用总次数上限，超出后将使用规则策略
DAILY_AI_CALLS_LIMIT=10


# --- 标的池配置 ---
# 核心标的池：优先处理。若未定义，则使用 ETF_LIST
CORE_ETF_LIST=510300,510050,159915,588000

# 观察标的池：当核心池无买入信号时，从这里选择
OBSERVE_ETF_LIST=512480,516160,513100,159790

# ETF_LIST 仅作为 CORE_ETF_LIST 未定义时的后备
# ETF_LIST=510300,510050,159915,588000,512480,516160,513100,159790


# --- 标的池过滤 ---
# 是否启用标的池过滤（基于流动性和上市时间）
FILTER_ENABLED=true

# 最小日均成交额（单位：元），默认2000万
MIN_AVG_TURNOVER=20000000

# 最短上市时间（单位：月），默认6个月
MIN_LISTING_MONTHS=6


# --- 策略与风控 ---
# 策略模式: AGGRESSIVE | MA_CROSS | BREAKOUT | MEAN_REVERSION | KDJ_MACD
STRATEGY_MODE=AGGRESSIVE

# 是否启用合议模式（AI 与规则同向才下单）
ENABLE_ENSEMBLE=true

# AI 决策的最低买入置信度阈值
MIN_BUY_CONFIDENCE=0.60

# 价格合理性校验带宽（例如，AI目标价与现价偏差超过此比例则忽略）
PRICE_BAND_PCT=0.15

# KDJ 探底的 J 值阈值
KDJ_LOW=20

# 是否启用动态仓位（基于AI置信度调整）
ENABLE_DYNAMIC_POSITION=true
BASE_POSITION_PCT=0.20  # 基础仓位比例
MIN_POSITION_PCT=0.05   # 最小仓位
MAX_POSITION_PCT=0.30   # 最大仓位

# 强制止损百分比（例如 0.08 表示亏损8%时强制卖出）
HARD_STOP_LOSS_PCT=0.08

# 快速止盈触发百分比（例如 0.10 表示盈利10%时触发）
QUICK_TAKE_PROFIT_TRIGGER=0.10

# 快速止盈卖出比例（例如 0.5 表示卖出一半）
QUICK_TAKE_PROFIT_SELL_RATIO=0.5

# 是否启用跟踪止损
ENABLE_TRAILING_STOP=true
TRAILING_STOP_PCT=0.05      # 从高水位回撤5%触发
TRAILING_STEP_PCT=0.01      # 价格每上涨1%更新一次高水位


# --- 交易成本配置 ---
# 交易成本（单位：基点/bps, 1 bps = 0.01%）
COST_BPS=3

# 成交滑点（单位：基点/bps）
SLIPPAGE_BPS=2


# --- Qlib 集成配置 (可选) ---\
# 是否在 Web 端启用 Qlib Provider (会降级 numpy/pandas)
QLIB_ENABLE=false

# Qlib provider 路径
QLIB_DIR=data/qlib/cn_etf

# Qlib 区域
QLIB_REGION=cn

# 是否在决策时使用 Qlib 算法信号（如 TopK）
QLIB_ALGO_ENABLED=true
QLIB_TOPK_K=2
QLIB_TOPK_LOOKBACK=60

# 轻量级 Qlib 因子规则的 RSI 阈值
QLIB_FACTOR_ENABLED=true
QLIB_RSI_LOW=30
QLIB_RSI_HIGH=70


# --- 期权与 Vegas 模块 (可选) ---\
# 无风险利率
RISK_FREE_RATE=0.02

# 期权链最大到期天数
OPT_MAX_EXPIRY_DAYS=90

# 期权接口缓存秒数
OPT_CACHE_TTL=60

# Vegas 风险近似计算参数
VEGAS_VOL_LOOKBACK=20
VEGAS_T_DAYS=30


# --- 系统与调度 ---\
# 初始资金
INITIAL_CAPITAL=100000

# 定时任务执行时间（24小时制，留空则不启动定时）
SCHEDULE_TIME=17:00

# Flask Web 服务器配置
FLASK_HOST=127.0.0.